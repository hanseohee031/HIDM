{% extends 'base.html' %}
{% block content %}
  <div class="container mt-4">
    <h2>My Schedule</h2>

    {% if chats %}
      <ul class="list-group mt-3">
        {% for chat in chats %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong>{{ chat.other_nick }}</strong><br>
              Scheduled at: 
              {% if chat.local_slot %}
                {{ chat.local_slot|date:"Y-m-d H:i" }}
              {% else %}
                Not set
              {% endif %}
            </div>
            <div>
              {% if chat.is_available %}
                <a href="{% url 'chat_room' chat.id %}" class="btn btn-primary">
                  Join Chat
                </a>
              {% else %}
                <small>{{ chat.time_remaining_str }}</small>
              {% endif %}
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="mt-3">You have no confirmed chat appointments.</p>
    {% endif %}
  </div>
{% endblock %}
