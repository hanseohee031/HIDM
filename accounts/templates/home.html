{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
  body {
    background-color: #f8f9fa;
    margin: 0;
    padding: 0;
    font-family: 'Noto Sans KR', 'Malgun Gothic', 'Apple SD Gothic Neo', dotum, '돋움', sans-serif;
  }
  .main-container {
    display: flex;
    justify-content: space-between;
    gap: 2.5%;
    padding: 40px 60px 0 60px;
  }
  .section {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    box-sizing: border-box;
    padding: 30px 28px 26px 28px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 330px;
    max-width: 420px;
    flex: 1;
    font-family: inherit;
    text-align: center;
  }
  .center-section-wrapper {
    display: flex;
    flex-direction: column;
    gap: 24px;
    flex: 1.1;
    min-width: 340px;
    max-width: 440px;
  }
  .sub-section {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    padding: 26px 22px 20px 22px;
    box-sizing: border-box;
    margin: 0;
    width: 100%;
    min-height: 80px;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: inherit;
    text-align: center;
  }
  .section h3,
  .sub-section h3 {
    color: #254e91;
    font-size: 1.15rem;
    font-weight: bold;
    margin: 0 0 18px 0;
    text-align: center;
    font-family: inherit;
  }
  .signup-list,
  .announcement-list {
    list-style: none;
    padding-left: 0;
    width: 100%;
    margin-bottom: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .signup-list li,
  .announcement-list li {
    margin-bottom: 7px;
    font-size: 0.98rem;
    text-align: center;
    font-family: inherit;
    width: 100%;
    justify-content: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .announcement-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    width: 100%;
  }
  .announcement-title {
    color: #254e91;
    text-decoration: none;
    font-weight: 500;
    font-family: inherit;
    transition: text-decoration 0.1s;
    max-width: 220px;
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: middle;
    text-align: center;
    margin: 0 auto;
  }
  .announcement-title:hover {
    text-decoration: underline;
  }
  .announcement-date {
    color: #888;
    font-size: 0.98em;
    font-family: inherit;
    vertical-align: middle;
    text-align: center;
    margin: 0;
    display: inline-block;
    white-space: nowrap;
  }
  .link-buttons {
    display: flex;
    flex-direction: column;
    padding: 0 8px;
    gap: 20px;
    margin-top: 15px;
    width: 100%;
  }
  .link-buttons a {
    display: block;
    width: 100%;
    height: 58px;
    overflow: hidden;
    border: none;
    background-color: transparent;
    border-radius: 0;
  }
  .link-buttons img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background-color: transparent;
    display: block;
  }
</style>

<div class="main-container">
  <!-- 왼쪽 About -->
  <div class="section">
    <h3>About HIDM</h3>
    <p style="margin: 0;">
      HIDM (Hallym International Direct Message) is a student-driven platform that helps 
      connect Hallym University students and international exchange students.  
      Chat, share experiences, and build global friendships!
    </p>
  </div>

  <!-- 중앙 위아래 2단(회원가입/공지) -->
  <div class="center-section-wrapper">
    <!-- 위: Signup Overview -->
    <div class="sub-section">
      <h3>Signup Overview</h3>
      <p><strong>Total Members:</strong> {{ total_users }}</p>
      <ul class="signup-list">
        {% for user in recent_users %}
          <li>{{ user.userprofile.nickname }} – {{ user.date_joined|date:"Y-m-d" }}</li>
        {% empty %}
          <li>No recent signups.</li>
        {% endfor %}
      </ul>
    </div>
    <!-- 아래: Announcement -->
    <div class="sub-section">
      <h3>Announcement</h3>
      <ul class="announcement-list">
        {% for post in recent_announcements %}
          <li>
            <span class="announcement-row">
              <a class="announcement-title" href="{% url 'announcement_detail' post.pk %}">
                {{ post.title|truncatechars:30 }}
              </a>
              <span class="announcement-date">({{ post.created_at|date:"Y-m-d" }})</span>
            </span>
          </li>
        {% empty %}
          <li>No recent announcements.</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- 오른쪽 링크 -->
  <div class="section">
    <h3>Hallym Links</h3>
    <div class="link-buttons">
      <a href="https://www.hallym.ac.kr/" target="_blank" rel="noopener">
        <img src="{% static 'images/homepage.png' %}" alt="Hallym University Homepage">
      </a>
      <a href="https://smartlead.hallym.ac.kr/" target="_blank" rel="noopener">
        <img src="{% static 'images/smartlead.png' %}" alt="smartLEAD">
      </a>
      <a href="https://was1.hallym.ac.kr:8087/hlwc/mdi/Login.html" target="_blank" rel="noopener">
        <img src="{% static 'images/sis.png' %}" alt="Student Information System (SIS)">
      </a>
      <a href="https://dorm.hallym.ac.kr/dormitory/index.do" target="_blank" rel="noopener">
        <img src="{% static 'images/dormitory.png' %}" alt="Hallym Dormitory">
      </a>
      <a href="https://library.hallym.ac.kr/" target="_blank" rel="noopener">
        <img src="{% static 'images/library.png' %}" alt="Hallym University Library">
      </a>
    </div>
  </div>
</div>
{% endblock %}
